<div class="projects-container">
  <div class="projects-header">
    <h1>Projects List</h1>
    <%= link_to ' + New Project', new_project_path, class: 'edit-link', data: {turbo: false}%>
  </div>

  <% if @projects.any? %>
    <div class="card-container">
      <% @projects.each do |project| %>
        <%= link_to project_path(project.id), class: 'card' do %>  <!-- Le lien englobe toute la carte -->
          <div class="card-image">
            <% if project.image.attached? %>
              <%= image_tag project.image, class: 'card-image', alt: "#{project.name} Image" %>
            <% else %>
              <%= image_tag "unavailable_image.jpg", class: 'card-image', alt: "No image available" %>
            <% end %>
          </div>

          <div class="card-content">
            <%= project_user = ProjectUser.find_by(project: project, user: @user) %>
            <% if project.joined_users.include?(@user) and project_user.status == "1" %>
              <h2><%= project.name %></h2>
              <p><strong>Location:</strong> <%= project.location %></p>
              <p><strong>Start Date:</strong> <%= project.starting_date %></p>
              <p><strong>End Date:</strong> <%= project.end_date %></p>
            <% else %>
              <% raise %>
              <p>ACCEPT OR DECLINE</p>
            <% end %>
          </div>
        <% end %>  <!-- Fin du lien -->
      <% end %>
    </div>
  <% else %>
    <p class="no-projects">Aucun projet trouv√©.</p>
  <% end %>
</div>
